<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz - Transcri√ß√£o do DNA</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(to right, #0f172a, #1e293b);
    color: #f8fafc;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  .container {
    background: #1e293b;
    border-radius: 15px;
    padding: 25px;
    width: 95%;
    max-width: 700px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.4);
    text-align: center;
  }

  h1 { margin-bottom: 20px; color: #38bdf8; }
  h2,h3 { color: #38bdf8; margin-bottom: 10px; }

  input[type="text"] {
    width: 80%;
    padding: 10px;
    border-radius: 8px;
    border: 2px solid #38bdf8;
    font-size: 16px;
    text-align: center;
    margin-bottom: 15px;
    outline: none;
    transition: 0.3s;
  }
  input[type="text"]:focus { border-color: #0ea5e9; }

  button {
    padding: 10px 20px;
    margin: 8px;
    border: none;
    border-radius: 8px;
    background: #38bdf8;
    color: #0f172a;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
  }
  button:hover { background: #0ea5e9; }

  .hidden { display: none; }

  .scoreboard {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    gap: 10px;
    font-size: 14px;
  }
  .scoreboard img {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    border: 2px solid #38bdf8;
    object-fit: cover;
  }

  .question { font-size: 18px; margin-bottom: 15px; }
  .options { display: flex; flex-direction: column; gap: 10px; }

  .timer { font-size: 16px; margin-top: 10px; color: #facc15; font-weight: bold; }

  .about-text {
    text-align: left;
    margin: 10px 0;
    background: #0f172a;
    border-radius: 10px;
    padding: 10px;
    max-height: 250px;
    overflow-y: auto;
  }

  .file-input { margin: 15px 0; text-align: center; }
  .avatar-label {
    display: inline-block;
    padding: 8px 15px;
    border-radius: 8px;
    background: #38bdf8;
    color: #0f172a;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
  }
  .avatar-label:hover { background: #0ea5e9; }
  .avatar-preview { margin-top: 10px; }
  .avatar-preview img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid #38bdf8;
    object-fit: cover;
  }
</style>
</head>
<body>
<div class="container">

  <h1>Quiz: Transcri√ß√£o do DNA</h1>

  <!-- Tela Sobre -->
  <div id="aboutScreen" class="hidden">
    <h2>‚ÑπÔ∏è Sobre o Jogo</h2>
    <div class="about-text">
      <p>O <strong>Quiz de Transcri√ß√£o do DNA</strong> foi criado para ajudar no aprendizado de <strong>Biologia Molecular</strong> de forma divertida e interativa.</p>
      <p>A din√¢mica foi inspirada no jogo <strong>Wordwall ‚Äì Abra a Caixa</strong>: cada pergunta √© como uma ‚Äúcaixa‚Äù que precisa ser aberta corretamente para avan√ßar e acumular pontos.</p>
      <p>Voc√™ pode <strong>escolher um avatar</strong>, responder as quest√µes e testar seus conhecimentos sobre o dogma central da biologia.</p>
      <p><em>Projeto desenvolvido por alunos do <strong>IFSUL ‚Äì Campus Bag√©</strong>: <strong>Jamerson Salinas Pereira</strong> e <strong>Delciomar</strong>.</em></p>
    </div>
    <button onclick="goToStart()">Voltar</button>
  </div>

  <!-- Tela inicial -->
  <div id="startScreen">
    <input type="text" id="playerName" placeholder="Digite seu nome">
    <div class="file-input">
      <p>üì∑ Escolha seu avatar:</p>
      <label for="avatarUpload" class="avatar-label">Selecionar imagem</label>
      <input type="file" id="avatarUpload" accept="image/*" onchange="uploadAvatar(event)" hidden>
      <div class="avatar-preview">
        <img id="avatarPreview" src="https://i.ibb.co/HfCrGWcK/0f6894e539589a50809e45833c8bb6c4.jpg" alt="Pr√©via do avatar">
      </div>
    </div>
    <button onclick="startGame()">‚ñ∂Ô∏è Iniciar Quiz</button>
    <h3>üìä Op√ß√µes</h3>
    <button onclick="showAbout()">Sobre o Quiz</button>
  </div>

  <!-- Tela de Jogo -->
  <div id="gameScreen" class="hidden">
    <div class="scoreboard">
      <span id="score">Pontos: 0</span>
      <span id="playerInfo"></span>
      <img id="playerAvatar" src="">
      <button onclick="toggleFullscreen()">üñ•Ô∏è Tela Cheia</button>
    </div>
    <div class="question" id="questionText"></div>
    <div class="options" id="options"></div>
    <div class="timer">Tempo: <span id="timeLeft">30</span>s</div>
    <button onclick="stopGame()">Parar</button>
  </div>

  <!-- Tela de Resultado -->
  <div id="resultScreen" class="hidden">
    <h2>Fim do Quiz!</h2>
    <p id="finalScore"></p>
    <p id="finalTime"></p>
    <button onclick="playAgain()">Jogar Novamente</button>
    <button onclick="goToStart()">Voltar</button>
  </div>

</div>

<script>
const allQuestions = [
  {q:"O que representa o dogma central da biologia molecular?", 
   options:["RNA ‚Üí DNA ‚Üí Prote√≠na","DNA ‚Üí RNA ‚Üí Prote√≠na","DNA ‚Üí Prote√≠na ‚Üí RNA","Prote√≠na ‚Üí RNA ‚Üí DNA"], 
   answer:"DNA ‚Üí RNA ‚Üí Prote√≠na"},
  {q:"Quais s√£o as tr√™s etapas principais do dogma central?", 
   options:["Transcri√ß√£o, Tradu√ß√£o, Muta√ß√£o","Replica√ß√£o, Transcri√ß√£o, Tradu√ß√£o","Replica√ß√£o, Tradu√ß√£o, Express√£o","Muta√ß√£o, Transcri√ß√£o, Replica√ß√£o"], 
   answer:"Replica√ß√£o, Transcri√ß√£o, Tradu√ß√£o"},
  {q:"Qual √© a exce√ß√£o ao dogma central encontrada em alguns v√≠rus?", 
   options:["DNA direto para prote√≠na","RNA sendo replicado sem DNA","Transcri√ß√£o reversa","Prote√≠nas gerando DNA"], 
   answer:"Transcri√ß√£o reversa"},
  {q:"O que √© a transcri√ß√£o reversa e qual enzima a realiza?", 
   options:["S√≠ntese de DNA a partir de RNA pela transcriptase reversa","S√≠ntese de RNA a partir de prote√≠nas pela polimerase","S√≠ntese de prote√≠nas a partir do DNA pela ribossomo","S√≠ntese de DNA a partir de DNA pela DNA polimerase"], 
   answer:"S√≠ntese de DNA a partir de RNA pela transcriptase reversa"},
  {q:"Qual enzima √© respons√°vel por realizar a transcri√ß√£o?", 
   options:["DNA polimerase","RNA polimerase","Helicase","Ligase"], 
   answer:"RNA polimerase"},
  {q:"Qual √© a mol√©cula produzida no processo de transcri√ß√£o?", 
   options:["DNA fita dupla","RNA mensageiro (mRNA)","Prote√≠na","Amino√°cidos"], 
   answer:"RNA mensageiro (mRNA)"},
  {q:"Onde ocorre a transcri√ß√£o nas c√©lulas eucari√≥ticas?", 
   options:["Citoplasma","N√∫cleo","Ribossomo","Mitoc√¥ndria"], 
   answer:"N√∫cleo"},
  {q:"Onde ocorre a transcri√ß√£o em c√©lulas procari√≥ticas?", 
   options:["N√∫cleo","Citoplasma","Mitoc√¥ndria","Ribossomo"], 
   answer:"Citoplasma"},
  {q:"Quais s√£o as tr√™s etapas da transcri√ß√£o?", 
   options:["Inicia√ß√£o, Elonga√ß√£o e Termina√ß√£o","Replica√ß√£o, Muta√ß√£o e Express√£o","Liga√ß√£o, Duplica√ß√£o e Tradu√ß√£o","C√≥pia, Gera√ß√£o e Produ√ß√£o"], 
   answer:"Inicia√ß√£o, Elonga√ß√£o e Termina√ß√£o"},
  {q:"O que acontece ap√≥s a transcri√ß√£o em eucariotos?", 
   options:["Splicing do pr√©-mRNA","Tradu√ß√£o direta","Duplica√ß√£o do DNA","Muta√ß√£o"], 
   answer:"Splicing do pr√©-mRNA"},
  {q:"Quais partes do RNA s√£o removidas no splicing?", 
   options:["√âxons","Introns","Promotores","C√≥dons"], 
   answer:"Introns"},
  {q:"Qual tipo de RNA leva a informa√ß√£o gen√©tica para a s√≠ntese de prote√≠nas?", 
   options:["tRNA","mRNA","rRNA","snRNA"], 
   answer:"mRNA"},
  {q:"Qual √© o papel do tRNA durante a s√≠ntese proteica?", 
   options:["Levar amino√°cidos at√© o ribossomo","Copiar o DNA","Formar o ribossomo","Transportar energia"], 
   answer:"Levar amino√°cidos at√© o ribossomo"},
  {q:"Qual sequ√™ncia geralmente sinaliza o in√≠cio da transcri√ß√£o?", 
   options:["TATA box","CAAT box","C√≥don AUG","Introns"], 
   answer:"TATA box"},
  {q:"O que significa 'fita molde' na transcri√ß√£o?", 
   options:["A fita de RNA que ser√° traduzida","A fita de DNA usada como refer√™ncia para o RNA","A fita dupla do DNA replicada","A prote√≠na inicial"], 
   answer:"A fita de DNA usada como refer√™ncia para o RNA"}
];

let questions = [];
let player = {name:"", avatar:"", score:0, time:0};
let currentQuestion = 0;
let timer;
let timeLeft = 30;
let startTime;

const defaultAvatar = "https://i.ibb.co/HfCrGWcK/0f6894e539589a50809e45833c8bb6c4.jpg";

function goToStart(){
  ["aboutScreen","resultScreen","gameScreen"].forEach(id=>document.getElementById(id).classList.add("hidden"));
  document.getElementById("startScreen").classList.remove("hidden");
}

function showAbout(){ 
  ["startScreen","resultScreen","gameScreen"].forEach(id=>document.getElementById(id).classList.add("hidden")); 
  document.getElementById("aboutScreen").classList.remove("hidden"); 
}

function uploadAvatar(event){
  const file = event.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = function(e){
      player.avatar = e.target.result;
      document.getElementById("avatarPreview").src = e.target.result;
    }
    reader.readAsDataURL(file);
  }
}

function startGame(){
  player.name = document.getElementById("playerName").value || "Visitante";
  player.score = 0;
  player.time = 0;
  currentQuestion = 0;
  startTime = Date.now();
  
  if(!player.avatar) {
    player.avatar = defaultAvatar;
  }
  
  document.getElementById("playerAvatar").src = player.avatar;
  document.getElementById("playerInfo").innerText = player.name;
  document.getElementById("score").innerText = "Pontos: 0";
  
  questions = [...allQuestions].sort(()=>0.5-Math.random());
  document.getElementById("startScreen").classList.add("hidden");
  document.getElementById("gameScreen").classList.remove("hidden");
  
  loadQuestion();
}

function loadQuestion(){
  if(currentQuestion >= questions.length){ 
    endGame(true); 
    return; 
  }
  
  const q = questions[currentQuestion];
  document.getElementById("questionText").innerText = q.q;
  
  const opts = document.getElementById("options");
  opts.innerHTML = "";
  
  q.options.forEach(opt => {
    const btn = document.createElement("button");
    btn.innerText = opt;
    btn.onclick = () => checkAnswer(opt);
    opts.appendChild(btn);
  });
  
  timeLeft = 30;
  document.getElementById("timeLeft").innerText = timeLeft;
  
  clearInterval(timer);
  timer = setInterval(() => {
    timeLeft--;
    document.getElementById("timeLeft").innerText = timeLeft;
    
    if(timeLeft <= 0){ 
      clearInterval(timer); 
      currentQuestion++; 
      loadQuestion(); 
    }
  }, 1000);
}

function checkAnswer(answer){
  clearInterval(timer);
  const q = questions[currentQuestion];
  
  if(answer === q.answer){
    const points = Math.max(1, 10 - (30 - timeLeft));
    player.score += points;
    document.getElementById("score").innerText = "Pontos: " + player.score;
  }
  
  currentQuestion++;
  loadQuestion();
}

function endGame(){
  clearInterval(timer);
  player.time = Math.floor((Date.now() - startTime)/1000);
  
  document.getElementById("gameScreen").classList.add("hidden");
  document.getElementById("resultScreen").classList.remove("hidden");
  document.getElementById("finalScore").innerText = "Pontua√ß√£o final: " + player.score;
  document.getElementById("finalTime").innerText = "Tempo total: " + player.time + "s";
}

function playAgain(){
  player.score = 0;
  player.time = 0;
  currentQuestion = 0;
  startTime = Date.now();
  
  document.getElementById("score").innerText = "Pontos: 0";
  document.getElementById("resultScreen").classList.add("hidden");
  document.getElementById("gameScreen").classList.remove("hidden");
  
  questions = [...allQuestions].sort(()=>0.5-Math.random());
  loadQuestion();
}

function stopGame(){ 
  endGame(false); 
}

// Fullscreen via F11 ou bot√£o
document.addEventListener("keydown", (e) => {
  if (e.key === "F11") {
    e.preventDefault();
    toggleFullscreen();
  }
});

function toggleFullscreen() {
  let elem = document.documentElement;
  if (!document.fullscreenElement) {
    if (elem.requestFullscreen) {
      elem.requestFullscreen();
    } else if (elem.webkitRequestFullscreen) { 
      elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) { 
      elem.msRequestFullscreen();
    }
  } else {
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    }
  }
}
</script>
</body>
</html>
